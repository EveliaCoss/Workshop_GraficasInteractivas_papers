p_jaguar <- ggplot() +
# Fondo gris para todos los países de América Latina
geom_sf(data = latin_america, fill = "lightgrey", color = "white") +
# Colorear los países del consorcio JAGUAR con interactividad
geom_sf_interactive(
data = filter(latin_america, name %in% JAGUAR_paises),
aes(fill = color, tooltip = name, data_id = name),
color = "white"
) +
scale_fill_identity() +  # Para usar directamente los colores definidos
# coord_sf(crs = st_crs(3857)) +
theme_void() +
theme(legend.position = "none")
# Mostrar como mapa interactivo
girafe(ggobj = p_jaguar)
map_plot
map_plot
map_plot
# Convertir a plotly interactivo
ggplotly(map_plotv2, tooltip = "text")
# Crear el mapa
p_jaguar <- ggplot() +
# Fondo gris para todos los países de América Latina
geom_sf(data = latin_america, fill = "lightgrey", color = "white") +
# Colorear los países del consorcio JAGUAR con interactividad
geom_sf_interactive(
data = filter(latin_america, name %in% JAGUAR_paises),
aes(fill = color, tooltip = name, data_id = name),
color = "white"
) +
scale_fill_identity() +  # Para usar directamente los colores definidos
# coord_sf(crs = st_crs(3857)) +
theme_void() +
theme(legend.position = "none")
# Mostrar como mapa interactivo
girafe(ggobj = p_jaguar)
p_jaguar
# Mostrar como mapa interactivo
girafe(ggobj = p_jaguar)
# Combine the plots
combined_plot <- (box_plot + line_chart) / p_jaguar + plot_layout(heights = c(1, 2))
combined_plot
# Combine the plots
combined_plot <- p_jaguar / (box_plot + line_chart) + plot_layout(heights = c(1, 2))
# Create the interactive plot
interactive_plot <- girafe(ggobj = combined_plot)
interactive_plot <- girafe_options(
interactive_plot,
opts_hover(css = "fill:red;stroke:black;")
)
# Crear el mapa
p_jaguar <- ggplot() +
# Fondo gris para todos los países de América Latina
geom_sf(data = latin_america, fill = "lightgrey", color = "white") +
# Colorear los países del consorcio JAGUAR con interactividad
geom_sf_interactive(
data = filter(latin_america, name %in% JAGUAR_paises),
aes(fill = color, tooltip = name, data_id = name),
color = "white"
) +
scale_fill_identity() +  # Para usar directamente los colores definidos
coord_sf(crs = st_crs(3857)) +
theme_void() +
theme(legend.position = "none")
p_jaguar
# Mostrar como mapa interactivo
girafe(ggobj = p_jaguar)
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar /
(box_plot + plot_spacer() + line_chart + plot_layout(widths = c(0.45, 0.1, 0.45)))
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 12,
width_svg = 12
)
interactive_plot
htmltools::save_html(interactive_plot, "graphs/multiple-ggiraph-1.html")
interactive_plot <- girafe(
# Combina el boxplot y el gráfico de líneas en una sola visualización interactiva
ggobj = box_plot + plot_spacer() + line_chart +
plot_layout(widths = c(0.45, 0.1, 0.45)),
# Opciones de interactividad para girafe
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
# Dimensiones del gráfico en unidades SVG
height_svg = 6,
width_svg = 9
)
interactive_plot
interactive_plot <- girafe(
# Combina el boxplot y el gráfico de líneas en una sola visualización interactiva
ggobj = box_plot + plot_spacer() + line_chart +
plot_layout(widths = c(0.45, 0.1, 0.45)),
# Opciones de interactividad para girafe
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
# Dimensiones del gráfico en unidades SVG
height_svg = 6,
width_svg = 6
)
interactive_plot
interactive_plot <- girafe(
# Combina el boxplot y el gráfico de líneas en una sola visualización interactiva
ggobj = box_plot + plot_spacer() + line_chart +
plot_layout(widths = c(0.45, 0.1, 0.45)),
# Opciones de interactividad para girafe
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
# Dimensiones del gráfico en unidades SVG
height_svg = 6,
width_svg = 8
)
interactive_plot
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar /
(box_plot + plot_spacer() + line_chart + plot_layout(widths = c(0.45, 0.1, 0.45)))
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 6,
width_svg = 8
)
interactive_plot
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar /
(box_plot + plot_spacer() + line_chart + plot_layout(widths = c(0.45, 0.1, 0.45)))
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 12,
width_svg = 8
)
interactive_plot
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar /
(box_plot + plot_spacer() + line_chart + plot_layout(widths = c(1, 0.1, 0.45)))
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 12,
width_svg = 8
)
interactive_plot
htmltools::save_html(interactive_plot, "graphs/multiple-ggiraph-1.html")
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar /
(box_plot + plot_spacer() + line_chart + plot_layout(widths = c(1, 1, 0.45)))
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 12,
width_svg = 8
)
interactive_plot
htmltools::save_html(interactive_plot, "graphs/multiple-ggiraph-1.html")
htmltools::save_html(interactive_plot, "graphs/multiple-ggiraph-1.html")
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar /
(box_plot + plot_spacer() + line_chart + plot_layout(widths = c(0.45, 0.1, 0.45)))
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = TRUE)
))
interactive_plot
htmltools::save_html(interactive_plot, "graphs/multiple-ggiraph-1.html")
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar /
(box_plot + plot_spacer() + line_chart + plot_layout(widths = c(0.45, 0.1, 0.45))) +
plot_layout(heights = c(0.5, 0.5))  # mitad mapa, mitad box + línea
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 12,
width_svg = 8
)
interactive_plot
htmltools::save_html(interactive_plot, "graphs/multiple-ggiraph-1.html")
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar | (box_plot / line_chart) + plot_layout(widths = c(0.45, 0.1, 0.45)) +
plot_layout(heights = c(0.5, 0.5))  # mitad mapa, mitad box + línea
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 12,
width_svg = 8
)
interactive_plot
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar | (box_plot / line_chart) + plot_layout(widths = c(0.45, 0.1, 0.45))
#+ plot_layout(heights = c(0.5, 0.5))  # mitad mapa, mitad box + línea
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 12,
width_svg = 8
)
interactive_plot
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar | (box_plot / line_chart) + plot_layout(widths = c(0.45, 0.1, 0.45))
#+ plot_layout(heights = c(0.5, 0.5))  # mitad mapa, mitad box + línea
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 6,
width_svg = 8
)
interactive_plot
htmltools::save_html(interactive_plot, "graphs/multiple-ggiraph-1.html")
# Crear archivo de lineas sobre la esperanza de vida
line_chart <- JAGUAR_gapminder %>%
ggplot(aes(x = year, y = lifeExp, col = country, data_id = id)) +
geom_line_interactive(linewidth = 2.5) +
geom_point_interactive(size = 4) +
theme_minimal(base_size = 18) +
labs(
x = element_blank(),
y = 'Esperanza de vida \n(en años)',
title = 'Esperanza de vida a lo largo del tiempo'
) +
theme(
text = element_text(
color = 'grey20'
),
legend.position = 'none',
panel.grid.minor = element_blank(),
plot.title.position = 'plot') +
scale_color_manual(values = paises_pal)
line_chart
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar | (box_plot / line_chart) + plot_layout(widths = c(0.45, 0.1, 0.45))
#+ plot_layout(heights = c(0.5, 0.5))  # mitad mapa, mitad box + línea
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 6,
width_svg = 8
)
interactive_plot
htmltools::save_html(interactive_plot, "graphs/multiple-ggiraph-1.html")
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar | (box_plot / line_chart) + plot_layout(widths = c(0.45, 0.1, 0.45))
#+ plot_layout(heights = c(0.5, 0.5))  # mitad mapa, mitad box + línea
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 6,
width_svg = 8
)
interactive_plot
# Crear el mapa
p_jaguar <- ggplot() +
# Fondo gris para todos los países de América Latina
geom_sf(data = latin_america, fill = "lightgrey", color = "white") +
# Colorear los países del consorcio JAGUAR con interactividad
geom_sf_interactive(
data = filter(latin_america, name %in% JAGUAR_paises),
aes(fill = color, tooltip = name, data_id = name),
color = "white"
) +
scale_fill_identity() +  # Para usar directamente los colores definidos
coord_sf(crs = st_crs(3857)) +
theme_void() +
theme(legend.position = "none")
p_jaguar
# Mostrar como mapa interactivo
girafe(ggobj = p_jaguar)
# Crear archivo de lineas sobre la esperanza de vida
line_chart <- JAGUAR_gapminder %>%
ggplot(aes(x = year, y = lifeExp, col = country, data_id = id)) +
geom_line_interactive(linewidth = 2.5) +
geom_point_interactive(size = 4) +
theme_minimal(base_size = 10) +
labs(
x = element_blank(),
y = 'Esperanza de vida \n(en años)',
title = 'Esperanza de vida a lo largo del tiempo'
) +
theme(
text = element_text(
color = 'grey20'
),
legend.position = 'none',
panel.grid.minor = element_blank(),
plot.title.position = 'plot') +
scale_color_manual(values = paises_pal)
line_chart
# Crear archivo de lineas sobre la esperanza de vida
line_chart <- JAGUAR_gapminder %>%
ggplot(aes(x = year, y = lifeExp, col = country, data_id = id)) +
geom_line_interactive(linewidth = 2.5) +
geom_point_interactive(size = 4) +
theme_minimal(base_size = 12) +
labs(
x = element_blank(),
y = 'Esperanza de vida \n(en años)',
title = 'Esperanza de vida a lo largo del tiempo'
) +
theme(
text = element_text(
color = 'grey20'
),
legend.position = 'none',
panel.grid.minor = element_blank(),
plot.title.position = 'plot') +
scale_color_manual(values = paises_pal)
line_chart
# Crear el boxplot interactivo con los datos de JAGUAR_gapminder
box_plot <- JAGUAR_gapminder %>%
ggplot(aes(x = pop, y = country, fill = country, data_id = id)) +
# Agregar boxplots interactivos con ligero desplazamiento vertical
geom_boxplot_interactive(
position = position_nudge(y = 0.25),  # Desplaza los boxplots hacia abajo
width = 0.5 # Controla el ancho de las cajas
) +
# Agregar marcas verticales tipo "barra" para valores individuales, también interactivos
geom_point_interactive(
aes(col = country),                  # Color por país
position = position_nudge(y = -0.25),# Desplaza puntos hacia arriba
size = 8,                            # Tamaño de la marca
shape = '|',                         # Tipo de marcador vertical
alpha = 0.75                         # Transparencia
) +
scale_fill_manual(values = paises_pal) +
scale_color_manual(values = paises_pal) +
# Etiquetas y título del gráfico
labs(
x = 'Población total (en años)',
y = element_blank(),
title = glue::glue('Distribución de la población')
) +
# Tema minimalista y ajustes estéticos
theme_minimal(base_size = 12) +
theme(
text = element_text(
color = 'grey20'
),
legend.position = 'none',
panel.grid.minor = element_blank(),
plot.title.position = 'plot'
)
box_plot
# Crear el boxplot interactivo con los datos de JAGUAR_gapminder
box_plot <- JAGUAR_gapminder %>%
ggplot(aes(x = pop, y = country, fill = country, data_id = id)) +
# Agregar boxplots interactivos con ligero desplazamiento vertical
geom_boxplot_interactive(
position = position_nudge(y = 0.25),  # Desplaza los boxplots hacia abajo
width = 0.5 # Controla el ancho de las cajas
) +
# Agregar marcas verticales tipo "barra" para valores individuales, también interactivos
geom_point_interactive(
aes(col = country, tooltip = id),                  # Color por país
position = position_nudge(y = -0.25),# Desplaza puntos hacia arriba
size = 8,                            # Tamaño de la marca
shape = '|',                         # Tipo de marcador vertical
alpha = 0.75                         # Transparencia
) +
scale_fill_manual(values = paises_pal) +
scale_color_manual(values = paises_pal) +
# Etiquetas y título del gráfico
labs(
x = 'Población total (en años)',
y = element_blank(),
title = glue::glue('Distribución de la población')
) +
# Tema minimalista y ajustes estéticos
theme_minimal(base_size = 12) +
theme(
text = element_text(
color = 'grey20'
),
legend.position = 'none',
panel.grid.minor = element_blank(),
plot.title.position = 'plot'
)
box_plot
girafe(
ggobj = box_plot) # Objeto ggplot a convertir en interactivo
# Crear archivo de lineas sobre la esperanza de vida
line_chart <- JAGUAR_gapminder %>%
ggplot(aes(x = year, y = lifeExp, col = country, data_id = id)) +
geom_line_interactive(linewidth = 2.5) +
geom_point_interactive(aes(tooltip = id), size = 4) +
theme_minimal(base_size = 12) +
labs(
x = element_blank(),
y = 'Esperanza de vida \n(en años)',
title = 'Esperanza de vida a lo largo del tiempo'
) +
theme(
text = element_text(
color = 'grey20'
),
legend.position = 'none',
panel.grid.minor = element_blank(),
plot.title.position = 'plot') +
scale_color_manual(values = paises_pal)
line_chart
girafe(
ggobj = line_chart, # Objeto ggplot a convertir en interactivo
# Seleccionar el Estilo CSS para la línea sobre la que se pasa el cursor
options = list(
opts_hover(css = ''), ## CSS code of line we're hovering over
# Estilo CSS para las demás líneas que no están siendo enfocadas (reduce opacidad)
opts_hover_inv(css = "opacity:0.1;"), ## CSS code of all other lines
# Fija el tamaño del gráfico (no permite que cambie con el tamaño del contenedor)
opts_sizing(rescale = FALSE) ## Fixes sizes to dimensions below
),
# Altura del gráfico en unidades SVG
height_svg = 6,
# Ancho del gráfico en unidades SVG
width_svg = 9
)
interactive_plot <- girafe(
# Combina el boxplot y el gráfico de líneas en una sola visualización interactiva
ggobj = box_plot + plot_spacer() + line_chart +
plot_layout(widths = c(0.45, 0.1, 0.45)),
# Opciones de interactividad para girafe
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
# Dimensiones del gráfico en unidades SVG
height_svg = 6,
width_svg = 8
)
interactive_plot
# Layout con patchwork: mapa arriba, boxplot + line_chart abajo
layout_total <- p_jaguar | (box_plot / line_chart) + plot_layout(widths = c(0.45, 0.1, 0.45))
#+ plot_layout(heights = c(0.5, 0.5))  # mitad mapa, mitad box + línea
# Convertir todo en visualización interactiva
interactive_plot <- girafe(
ggobj = layout_total,
options = list(
opts_hover(css = ''),
opts_hover_inv(css = "opacity:0.1;"),
opts_sizing(rescale = FALSE)
),
height_svg = 6,
width_svg = 8
)
interactive_plot
